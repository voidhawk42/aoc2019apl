i←(⊂'ORE'),⍨⊃,/¯1↑¨⊢/p←↑{⍵∘{⍺(∊⊆⊣)⍵}¨(⊂⎕D),⊂⎕A}¨⊃⎕NGET'p14.txt'1
r←↑{(-@(≢⍺)-⍎¨⍺)@(i⍳⍵)⊢0⍴⍨≢i}/p
f←{-¯1↑{∧/0≤¯1↓⍵:⍵ ⋄ ∇⍵+n×⌈(-a⌷⍵)÷a⌷n←r⌷⍨a←⊃⍸0>⍵}⍵×r⌷⍨i⍳⊂'FUEL'}
f 1 ⍝ part 1
u←{1e12<f⍵:⍵ ⋄ ∇2×⍵}1 ⋄ 1{⍺=⍵:⍵ ⋄ 1e12>f⊢m←⌈2÷⍨⍺+⍵:m∇⍵-1 ⋄ ⍺∇m}u ⍝ part 2